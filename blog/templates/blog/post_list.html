{% extends 'blog/base.html' %}
{% load markdownify %}
{% block title%} My Blog {% endblock%}

{% block nav %}
  <li class="nav-item">
    <a class="nav-link" href="{% url 'post_new'%}"><i class="fa fa-plus">Add post</i></a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="{% url 'post_draft_list' %}"><i class="fas fa-pencil-ruler fa">view drafts</i></a>
  </li>
{% endblock%}

{% block content%}

{% if posts %}
{% for post in posts %}

<!-- Title -->
<h1 class="mt-4"><a href="{% url 'post_detail' pk=post.pk %}">{{ post.title }}</a></h1>

<!-- Author -->
<p class="lead">
by
<a href="#">{{post.author}}</a>
</p>

<hr>
<!-- Date/Time -->
<p> Published: {{ post.published_date }}</p>
{% if post.edited_date%}
<p> Edited: {{ post.edited_date }} </p>
{% endif%}
<hr>

<!-- Preview Image 
<img class="img-fluid rounded" src="http://placehold.it/900x300" alt="">
<hr>
-->

<!-- Post body -->
<p class="lead">
<p>{{ post.text |markdown | safe| truncatechars:50| linebreaksbr }}</p>
</p>

<!--Comment count op a post -->
<a href="{% url 'post_detail' pk=post.pk%}">Comments: {{ post.approved_comments.count }}</a>

{% endfor %}

<!--If no posts -->
{% else %}
<div class="alert alert-secondary alert-dismissible fade show" role="alert">
  <i class="far fa-sad-tear"> Sorry no posts.
  <a href="{% url 'post_new' %}">Add post</a>
  </i> 
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endif %}

{% endblock %}
